{"version":3,"names":["inputFileCss","PopInputFileStyle0","InputFile","_InputFile_inputId","set","this","inputIds","_InputFile_inheritedAttributes","_InputFile_nativeInput","_InputFile_debounceTimer","_InputFile_onChange","popChange","emit","value","__classPrivateFieldGet","_InputFile_instances","_InputFile_getValue","call","_InputFile_onFocus","popFocus","_InputFile_onBlur","popBlur","onValueChange","file","internals","setFormValue","formResetCallback","formStateRestoreCallback","state","componentWillLoad","__classPrivateFieldSet","inheritAriaAttributes","host","inheritAttributes","componentConfig","apply","multiple","required","readonly","disabled","autoFocus","bordered","size","config","get","componentDidLoad","files","Array","isArray","forEach","idx","disconnectedCallback","clearTimeout","setFocus","focus","render","errorText","helperText","inputId","hasLabel","textContent","hasError","hasHelper","hasBottomText","h","Host","key","class","hostContext","Show","when","htmlFor","part","type","id","name","onChange","onFocus","onBlur","ref","el","from"],"sources":["src/components/input-file/input-file.scss?tag=pop-input-file&encapsulation=shadow","src/components/input-file/input-file.tsx"],"sourcesContent":["@use \"../../global/styles/radius\";\r\n@use \"../../global/styles/theme\";\r\n@use \"../../global/styles/input\";\r\n@use \"../../global/styles/join-item\";\r\n\r\n/**\r\n * @prop --border-radius: Change border radius.\r\n * @prop --border-color: Change border and outline color.\r\n *\r\n * @prop --button-background: Change button background.\r\n * @prop --button-color: Change button text color.\r\n * @prop --button-animation: Change animation duration of the button.\r\n *\r\n * @prop --background: Change background color.\r\n * @prop --background-opacity: CHange background opacity.\r\n * @prop --color: Change text color.\r\n *\r\n * @prop --error-color: Change error text .\r\n */\r\n\r\n@include join-item.item(input);\r\n\r\n// Input-File\r\n// ----------------------------------------------------------------\r\n\r\n$minWidth: 12rem;\r\n:host {\r\n  @include input.label;\r\n  @include input.helper;\r\n\r\n  display: inline-flex;\r\n  flex-direction: column;\r\n\r\n  > input {\r\n    box-sizing: border-box;\r\n    overflow: hidden;\r\n\r\n    padding: 0;\r\n\r\n    border-style: solid;\r\n    border-width: 1px;\r\n    border-radius: var(--border-radius, #{radius.$md});\r\n    border-color: var(--border-color, oklch(#{theme.get-color(\"base.content\")} / 0));\r\n\r\n    background-color: var(--background, oklch(#{theme.get-color(\"base.100\")} / var(--background-opacity, 1)));\r\n    color: var(--color, oklch(#{theme.get-color(\"base.content\")}));\r\n\r\n    min-width: $minWidth;\r\n    width: 100%;\r\n\r\n    cursor: pointer;\r\n\r\n    &:focus-visible {\r\n      outline-style: solid;\r\n      outline-width: 2px;\r\n      outline-offset: 2px;\r\n      outline-color: var(--border-color, oklch(theme.get-color(\"base.content\") / 0.2));\r\n    }\r\n    &::file-selector-button {\r\n      border: none;\r\n\r\n      padding-left: 1rem;\r\n      padding-right: 1rem;\r\n      height: 100%;\r\n\r\n      background-color: var(--button-background, oklch(#{theme.get-color(\"neutral.base\")}));\r\n\r\n      color: var(--button-color, oklch(#{theme.get-color(\"neutral.content\")}));\r\n      text-align: center;\r\n      text-transform: uppercase;\r\n      text-decoration-line: none;\r\n      font-weight: 600;\r\n\r\n      cursor: pointer;\r\n      user-select: none;\r\n\r\n      transition-property: color, background-color, border-color, opacity;\r\n      transition-timing-function: ease-out;\r\n      transition-duration: 200ms;\r\n      animation: button-pop var(--button-animation, 0.25s) ease-out;\r\n    }\r\n  }\r\n}\r\n\r\n// Bordered\r\n:host([bordered]) {\r\n  --border-color: oklch(#{theme.get-color(\"base.content\")} / 0.2);\r\n}\r\n\r\n// Input-File Size\r\n// ----------------------------------------------------------------\r\n\r\n:host([size=\"xs\"]) > input {\r\n  padding-inline-end: 0.5rem;\r\n  height: 1.5rem;\r\n  font-size: 0.75rem;\r\n  line-height: 1.625;\r\n\r\n  &::file-selector-button {\r\n    margin-right: 0.5rem;\r\n    font-size: 0.75rem;\r\n  }\r\n}\r\n:host([size=\"sm\"]) > input {\r\n  padding-inline-end: 0.75rem;\r\n  height: 2rem;\r\n  font-size: 0.875rem;\r\n  line-height: 2;\r\n\r\n  &::file-selector-button {\r\n    margin-right: 0.75rem;\r\n    font-size: 0.875rem;\r\n  }\r\n}\r\n:host([size=\"md\"]),\r\n:host(:not([size])) {\r\n  > input {\r\n    padding-inline-end: 1rem;\r\n    height: 3rem;\r\n    font-size: 0.875rem;\r\n    line-height: 2;\r\n\r\n    &::file-selector-button {\r\n      margin-right: 1rem;\r\n      font-size: 0.875rem;\r\n    }\r\n  }\r\n}\r\n:host([size=\"lg\"]) > input {\r\n  padding-inline-end: 1.5rem;\r\n  height: 4rem;\r\n  font-size: 1.125rem;\r\n  line-height: 2;\r\n\r\n  &::file-selector-button {\r\n    margin-right: 1.5rem;\r\n    font-size: 1.125rem;\r\n  }\r\n}\r\n\r\n// Input-File Color\r\n// ----------------------------------------------------------------\r\n\r\n@mixin generate-color($colors...) {\r\n  @each $color in $colors {\r\n    $base: theme.get-color(\"#{$color}.base\");\r\n    $shade: theme.get-color(\"#{$color}.shade\");\r\n    $text: theme.get-color(\"#{$color}.content\");\r\n\r\n    :host([color=\"#{$color}\"]) {\r\n      --button-background: oklch(#{$base});\r\n      --button-color: oklch(#{$text});\r\n      --border-color: oklch(#{$base});\r\n\r\n      > input:hover {\r\n        --button-background: color-mix(in oklab, oklch(#{$base}) 90%, black);\r\n\r\n        @supports (color: color-mix(in oklab, black, black)) {\r\n          --button-background: oklch(#{$shade});\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n@include generate-color(primary, secondary, accent, info, success, warning, error);\r\n\r\n:host(:not([color], [disabled])) {\r\n  $color: theme.get-color(\"neutral.base\");\r\n  $shade: theme.get-color(\"neutral.shade\");\r\n\r\n  > input:hover {\r\n    --button-background: color-mix(in oklab, oklch(#{$color}) 90%, black);\r\n\r\n    @supports not (color: color-mix(in oklab, black, black)) {\r\n      --button-background: oklch(#{$shade});\r\n    }\r\n  }\r\n}\r\n:host([color=\"ghost\"]) {\r\n  --background-opacity: 0.05;\r\n  --button-background: transparent;\r\n  --button-color: currentColor;\r\n\r\n  > input:focus {\r\n    --background-opacity: 1;\r\n\r\n    color: var(--text-color, oklch(theme.get-color(\"base.content\")));\r\n  }\r\n}\r\n\r\n// Input-File State\r\n// ----------------------------------------------------------------\r\n\r\n:host([disabled]) {\r\n  $background: theme.get-color(\"base.200\");\r\n  $color: theme.get-color(\"base.content\");\r\n  $btn-background: theme.get-color(\"neutral.base\");\r\n\r\n  --background: oklch(#{$background});\r\n  --border-color: oklch(#{$background});\r\n  --color: oklch(#{$color} / 0.2);\r\n\r\n  --button-color: oklch(#{$color} / 0.2);\r\n  --button-background: oklch(#{$btn-background} / 0.2);\r\n\r\n  > input,\r\n  input::file-selector-button {\r\n    cursor: not-allowed;\r\n  }\r\n}\r\n","import { componentConfig, config } from '#config';\r\nimport { Attributes, hostContext, inheritAriaAttributes, inheritAttributes } from '#utils/helpers';\r\nimport {\r\n  AttachInternals,\r\n  Component,\r\n  ComponentInterface,\r\n  Element,\r\n  Event,\r\n  EventEmitter,\r\n  Host,\r\n  Method,\r\n  Prop,\r\n  Watch,\r\n  h,\r\n} from '@stencil/core';\r\nimport { Color, Size } from 'src/interfaces';\r\nimport { Show } from '../Show';\r\n\r\n/**\r\n * Textarea allows users to enter text in multiple lines.\r\n *\r\n * @slot - Slot for the content of the label\r\n *\r\n * @part label - The native HTML label element that wrap the text .\r\n * @part native - The native HTML input element.\r\n */\r\n@Component({\r\n  tag: 'pop-input-file',\r\n  styleUrl: 'input-file.scss',\r\n  shadow: true,\r\n  formAssociated: true,\r\n})\r\nexport class InputFile implements ComponentInterface {\r\n  #inputId = `pop-input-file-${inputIds++}`;\r\n  #inheritedAttributes: Attributes;\r\n\r\n  #nativeInput!: HTMLInputElement;\r\n  #debounceTimer: NodeJS.Timeout;\r\n\r\n  @Element() host!: HTMLElement;\r\n\r\n  @AttachInternals() internals: ElementInternals;\r\n\r\n  /**\r\n   * The name of the control, which is submitted with the form data.\r\n   */\r\n  @Prop() name: string = this.#inputId;\r\n\r\n  /**\r\n   * The value of the toggle does not mean if it's checked or not, use the `checked`\r\n   * property for that.\r\n   *\r\n   * The value of a toggle is analogous to the value of a `<input type=\"checkbox\">`,\r\n   * it's only used when the toggle participates in a native `<form>`.\r\n   */\r\n  @Prop({ mutable: true }) value?: File | File[] | null;\r\n  @Watch('value')\r\n  onValueChange(file: File): void {\r\n    this.internals.setFormValue(file, file);\r\n  }\r\n\r\n  /**\r\n   * If `true`, the user can enter more than one value.\r\n   * This attribute applies when the type attribute is set to `\"email\"`, otherwise it is ignored.\r\n   *\r\n   * @config @default false\r\n   */\r\n  @Prop({ mutable: true }) multiple?: boolean;\r\n\r\n  /**\r\n   * If `true`, the user must fill in a value before submitting a form.\r\n   *\r\n   * @config @default false\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) required?: boolean;\r\n\r\n  /**\r\n   * If `true`, the user cannot modify the value.\r\n   *\r\n   * @config @default false\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) readonly?: boolean;\r\n\r\n  /**\r\n   * If `true`, the user cannot interact with the element.\r\n   *\r\n   * @config @default false\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) disabled?: boolean;\r\n\r\n  /**\r\n   * If `true`, the element will be focused on page load.\r\n   *\r\n   * @config @default false\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) autoFocus?: boolean;\r\n\r\n  /**\r\n   * if `true`, adds border to textarea when `color` property is not set.\r\n   *\r\n   * @config @default false\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) bordered?: boolean;\r\n\r\n  /**\r\n   * The color to use from your application's color palette.\r\n   * Default options are: `\"primary\"`, `\"secondary\"`, `\"accent\"`, `\"ghost\"`, `\"info\"`, `\"success\"`, `\"warning\"`, `\"error\"`.\r\n   * For more information on colors, see [theming](/docs/theming/basics).\r\n   *\r\n   * @config\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) color?: Color | 'ghost';\r\n\r\n  /**\r\n   * Change size of the component\r\n   * Options are: `\"xs\"`, `\"sm\"`, `\"md\"`, `\"lg\"`.\r\n   *\r\n   * @config @default \"md\"\r\n   */\r\n  @Prop({ reflect: true, mutable: true }) size?: Size;\r\n\r\n  /**\r\n   * Text that is placed under the textarea and displayed when no error is detected.\r\n   */\r\n  @Prop() helperText: string;\r\n\r\n  /**\r\n   * Text that is placed under the textarea and displayed when an error is detected.\r\n   */\r\n  @Prop() errorText: string;\r\n\r\n  /**\r\n   * The `popChange` event is fired when the user modifies the textarea's value.\r\n   * Unlike the ionInput event, the `popChange` event is fired when the element loses focus after its value has been modified.\r\n   */\r\n  @Event() popChange: EventEmitter<InputFileChangeEventDetail>;\r\n\r\n  /**\r\n   * Emitted when the input has focus.\r\n   */\r\n  @Event() popFocus: EventEmitter<void>;\r\n\r\n  /**\r\n   * Emitted when the input loses focus.\r\n   */\r\n  @Event() popBlur: EventEmitter<void>;\r\n\r\n  formResetCallback(): void {\r\n    this.value = null;\r\n    this.#nativeInput.value = null;\r\n  }\r\n\r\n  formStateRestoreCallback(state: File): void {\r\n    this.value = state;\r\n  }\r\n\r\n  componentWillLoad(): void {\r\n    this.#inheritedAttributes = {\r\n      ...inheritAriaAttributes(this.host),\r\n      ...inheritAttributes(this.host, ['tabindex', 'title', 'data-form-type']),\r\n    };\r\n    componentConfig.apply(this, 'pop-input-file', {\r\n      multiple: false,\r\n      required: false,\r\n      readonly: false,\r\n      disabled: false,\r\n      autoFocus: false,\r\n      bordered: false,\r\n      size: config.get('defaultSize', 'md'),\r\n    });\r\n  }\r\n\r\n  // TODO: Tester si ça fonctionne\r\n  componentDidLoad(): void {\r\n    const { value } = this;\r\n    const files = Array.isArray(value) ? value : [value];\r\n    files.forEach((file, idx) => (this.#nativeInput.files[idx] = file));\r\n  }\r\n\r\n  disconnectedCallback(): void {\r\n    clearTimeout(this.#debounceTimer);\r\n  }\r\n\r\n  /**\r\n   * Sets focus on the native `textarea` in `pop-textarea`. Use this method instead of the global\r\n   * `textarea.focus()`.\r\n   */\r\n  @Method()\r\n  async setFocus(): Promise<void> {\r\n    this.#nativeInput?.focus();\r\n  }\r\n\r\n  #getValue(): File[] {\r\n    return Array.from(this.#nativeInput.files);\r\n  }\r\n\r\n  #onChange = (): void => {\r\n    this.popChange.emit({\r\n      value: this.#getValue(),\r\n    });\r\n  };\r\n\r\n  #onFocus = (): void => {\r\n    this.popFocus.emit();\r\n  };\r\n\r\n  #onBlur = (): void => {\r\n    this.popBlur.emit();\r\n  };\r\n\r\n  render() {\r\n    const { host, errorText, helperText } = this;\r\n    const inputId = this.#inputId;\r\n\r\n    const hasLabel = host.textContent !== '';\r\n    const hasError = !!errorText;\r\n    const hasHelper = !!helperText;\r\n    const hasBottomText = hasError || hasHelper;\r\n\r\n    return (\r\n      <Host\r\n        aria-labelledby={inputId}\r\n        aria-hidden={this.disabled ? 'true' : null}\r\n        class={{\r\n          'join-item': hostContext(host, 'pop-join'),\r\n        }}\r\n      >\r\n        <Show when={hasLabel}>\r\n          <div class=\"label\">\r\n            <label htmlFor={inputId} part=\"label\">\r\n              <slot />\r\n            </label>\r\n          </div>\r\n        </Show>\r\n        <input\r\n          part=\"native\"\r\n          type=\"file\"\r\n          id={inputId}\r\n          name={this.name}\r\n          multiple={this.multiple}\r\n          required={this.required}\r\n          readonly={this.readonly}\r\n          disabled={this.disabled}\r\n          autoFocus={this.autoFocus}\r\n          onChange={this.#onChange}\r\n          onFocus={this.#onFocus}\r\n          onBlur={this.#onBlur}\r\n          ref={el => (this.#nativeInput = el)}\r\n          {...this.#inheritedAttributes}\r\n        />\r\n        <Show when={hasBottomText}>\r\n          <div class=\"text-wrapper\">\r\n            <Show when={hasError}>\r\n              <span class=\"error-text\">{errorText}</span>\r\n            </Show>\r\n            <Show when={hasHelper}>\r\n              <span class=\"helper-text\">{helperText}</span>\r\n            </Show>\r\n          </div>\r\n        </Show>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n\r\nlet inputIds = 0;\r\n"],"mappings":"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","ignoreList":[]}